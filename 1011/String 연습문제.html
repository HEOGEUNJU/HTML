<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
    <h4>주민등록번호에서 정보 추출(생일, 성별, 나이)</h4>
    <input type="button" value="추출" onclick="f_info()">

    <h4>주민등록번호 유효성 검증</h4>
    

    <script>
        //공식1. 각 항목에 2~9까지 수 곱하여 총 합 구하기
        var hap = "";
        //총 합 구하기 방식1. 배열 값 활용하기
        // var num = "234567892345"
        for(var i = 0; i < idNum.lengh-1; i++){
            // console.log("idx",i,idNum[i])
            // hap += idNum[i]*num[i];

            //총합 구하기 방식2. 순차적인 값을 도출해내는 공식 활용
            hap += idNum[i]*(i%8+2);
            

        }
        // 공식2. hap을 11로 나눈 나머지를 구함
        // 공식3. 11에서 위 결과를 뺀다
        var rst = 11-(hap%11);
        console.log(rst);
        rst = rst%10; // 공식4. 몫이 10일때 0, 11일때 1...
        // 공식5. 위의 값이 M의 자리와 같을 때 유효한 주민등록번호
        var last = jumin.charAt(idNum.length); // 마지막 위치 값 가져옴

        var result = "";
        if(last == rst) result += "주민등록번호가 유효하네요";
        else result += "주민번호가 유효하지 않습니다."
        
        //출력 데이터 작성
        var str = `입력한 주민등록번호 : ${jumin.substr(0,7)}****** <br>`
        str += `${result}`;
        document.querySelector("#d2").innerHTML = str;
 
        function f_info(){
            var jumin = prompt("주민번호 입력",  "110325-4432618");
            //자료추출 (index 01:연도/23:월/45:일/7:성별 및 출생연도)
            var y = jumin.substring(0,2); //slice(0,2) substr(0,2)
            var m = jumin.substring(2,4); //slice(2,4) substr(2,2)
            var d = jumin.substring(4,6); //slice(4,6) substr(4,2)
            var g = jumin.substring(7,8); //slice(7,8) substr(7,1)


            var yy = "";
            //출생년도
            if(g == "1" || g == "2") yy="19";
            else if (gg=="3" || g=="4" ) yy="20";
            //성별            
            if(g == "1" || g == "3") gd="남자";
            else if (gg=="2" || g=="4" ) gd="여자";
            
            //생일
            var bir = yy.concat(y) + "년" + m + "월" + d + "일";
            //나이
             new now = new Date;
             var year = now.getFullYear(); //4자리 연도
             var age = year - yy.concat(y);

            //출력 데이터 작성
            var result = `주민등록번호 :  ${jumin.substr(0,7)}**********<br>` ;
            result += `생년월일  : ${bir} <br>`;
            result +=                    

        }
        


    </script>


</body>
</html>